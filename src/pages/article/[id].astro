---
import Layout from '@/layouts/Layout.astro';
import { supabase } from '@/db/supabase';

const { id } = Astro.params;

if (!id) {
  throw new Error("ID de redactor no proporcionado.");
}

const { data: article, error } = await supabase
  .from('article')
  .select('*, profiles!inner(full_name)')
  .eq('id', Number(id)).single();


// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout> 
        <article class="max-w-3xl mx-auto my-15">
          <h1 class="text-4xl font-bold mb-4">{article?.title}</h1>
          <img src=`${article?.imgurl}` alt="Imagen del artÃ­culo" class="w-full h-auto rounded mb-6" />
          <div class="prose prose-lg mb-6" ><p> {article?.body}</p></div>
          <div class="text-sm text-gray-600 border-t pt-4">
          <p><strong>Autor:</strong>{article?.profiles.full_name}</p>
          <p>
            <strong>Publicado el:</strong>{' '}
            {new Date(String(article?.timestamp)).toLocaleDateString('es-ES', {
              day: 'numeric',
              month: 'long',
              year: 'numeric',
            })}
          </p>          
          </div>
        </article>
</Layout>
