---
// Importamos los componentes necesarios
import DropdownMenu from './DropdownMenu.astro';

// Simulamos la obtenci√≥n del usuario actual (esto se reemplazar√≠a con tu l√≥gica de autenticaci√≥n real)
const isLoggedIn = Astro.cookies.has('session');
let userRole = '';

if (isLoggedIn) {
  // En un caso real, obtendr√≠as el rol desde tu sesi√≥n o base de datos
  userRole = Astro.cookies.get('userRole')?.value || 'redactor';
}
---

<header class="bg-[#2a2b2a] text-[#fcf7f8] shadow-md">
  <div class="container mx-auto px-4 py-3">
    <div class="flex justify-between items-center">
      <!-- Logo -->
      <a href="/" class="flex items-center space-x-2">
        <!-- Icono simplificado -->
        <span class="text-[#a31621] font-bold text-2xl">N</span>
        <span class="font-bold text-xl">Acme Noticias</span>
      </a>

      <!-- Navegaci√≥n -->
      <div class="flex items-center space-x-4">
        <!-- Bot√≥n de b√∫squeda -->
        <a href="/buscar" class="flex items-center space-x-1 px-3 py-2 rounded-md hover:bg-[#23b5d3] hover:text-[#2a2b2a] transition-colors duration-200">
          <!-- Icono simplificado -->
          <span class="text-lg">üîç</span>
          <span>Buscar</span>
        </a>

        <!-- Bot√≥n de inicio de sesi√≥n o men√∫ de usuario -->
        {isLoggedIn ? (
          <div class="relative" id="user-menu-container">
            <button
              id="user-menu-button"
              class="flex items-center space-x-1 px-3 py-2 rounded-md bg-[#a31621] hover:bg-[#8a131c] transition-colors duration-200"
              aria-expanded="false"
              aria-haspopup="true"
            >
              <span class="text-lg">üë§</span>
              <span>Mi Cuenta</span>
              <span class="text-xs ml-1">‚ñº</span>
            </button>

            <DropdownMenu userRole={userRole} />
          </div>
        ) : (
          <a href="/login" class="flex items-center space-x-1 px-3 py-2 rounded-md bg-[#a31621] hover:bg-[#8a131c] transition-colors duration-200">
            <span class="text-lg">üîë</span>
            <span>Iniciar Sesi√≥n</span>
          </a>
        )}
      </div>
    </div>
  </div>
</header>

<script src="@/lib/dropdown.ts"></script>